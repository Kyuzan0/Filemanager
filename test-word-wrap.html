<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Word Wrap Toggle Test</title>
    <style>
        body {
            font-family: system-ui, -apple-system, sans-serif;
            margin: 0;
            padding: 20px;
            background: #f8fafc;
        }
        
        .test-container {
            max-width: 400px;
            margin: 0 auto;
            background: white;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            overflow: hidden;
        }
        
        .test-header {
            padding: 16px;
            background: #f1f5f9;
            border-bottom: 1px solid #e2e8f0;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .test-title {
            font-weight: 600;
            color: #1e293b;
        }
        
        .btn-word-wrap {
            padding: 6px 10px;
            font-size: 12px;
            border-radius: 6px;
            background: #f8fafc;
            border: 1px solid #e2e8f0;
            color: #64748b;
            transition: all 0.2s ease;
            display: inline-flex;
            align-items: center;
            gap: 4px;
            cursor: pointer;
        }
        
        .btn-word-wrap:hover {
            background: #f1f5f9;
            transform: translateY(-1px);
        }
        
        .btn-word-wrap.active {
            background: #3b82f6;
            color: white;
            border-color: #3b82f6;
        }
        
        .test-content {
            padding: 16px;
        }
        
        .file-list {
            border: 1px solid #e2e8f0;
            border-radius: 6px;
            overflow: hidden;
        }
        
        .file-item {
            display: flex;
            align-items: center;
            padding: 8px 12px;
            border-bottom: 1px solid #f1f5f9;
            gap: 8px;
        }
        
        .file-item:last-child {
            border-bottom: none;
        }
        
        .file-checkbox {
            width: 16px;
            height: 16px;
        }
        
        .file-icon {
            width: 20px;
            height: 20px;
            background: #fef3c7;
            border-radius: 4px;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-shrink: 0;
        }
        
        .file-name {
            flex: 1;
            min-width: 0;
            font-size: 14px;
            color: #1e293b;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }
        
        .file-size {
            font-size: 12px;
            color: #64748b;
            flex-shrink: 0;
        }
        
        /* Word wrap enabled state */
        .word-wrap-enabled .file-name {
            white-space: normal;
            overflow: visible;
            text-overflow: clip;
            word-break: break-word;
            overflow-wrap: break-word;
        }
        
        .word-wrap-enabled .file-list {
            overflow-x: auto;
        }
        
        .instructions {
            margin-top: 20px;
            padding: 16px;
            background: #f0f9ff;
            border-radius: 6px;
            border-left: 4px solid #3b82f6;
        }
        
        .instructions h3 {
            margin: 0 0 8px 0;
            color: #1e40af;
        }
        
        .instructions p {
            margin: 0;
            color: #1e293b;
            font-size: 14px;
        }
    </style>
</head>
<body>
    <div class="test-container" id="app">
        <div class="test-header">
            <div class="test-title">Word Wrap Toggle Test</div>
            <button class="btn-word-wrap" id="wordWrapToggle" title="Toggle Word Wrap">
                <span>üî§</span>
                <span>Wrap</span>
            </button>
        </div>
        
        <div class="test-content">
            <div class="file-list">
                <div class="file-item">
                    <input type="checkbox" class="file-checkbox">
                    <div class="file-icon">üìÅ</div>
                    <div class="file-name">very-long-folder-name-that-should-definitely-wrap-when-word-wrap-is-enabled</div>
                    <div class="file-size">-</div>
                </div>
                
                <div class="file-item">
                    <input type="checkbox" class="file-checkbox">
                    <div class="file-icon">üìÑ</div>
                    <div class="file-name">extremely-long-document-file-name-with-many-words-and-hyphens-that-should-wrap-properly.pdf</div>
                    <div class="file-size">2.4 MB</div>
                </div>
                
                <div class="file-item">
                    <input type="checkbox" class="file-checkbox">
                    <div class="file-icon">üñºÔ∏è</div>
                    <div class="file-name">image-with-very-long-descriptive-name-that-shows-how-wrapping-works.jpg</div>
                    <div class="file-size">1.8 MB</div>
                </div>
                
                <div class="file-item">
                    <input type="checkbox" class="file-checkbox">
                    <div class="file-icon">üìÑ</div>
                    <div class="file-name">short-file.txt</div>
                    <div class="file-size">12 KB</div>
                </div>
            </div>
            
            <div class="instructions">
                <h3>Test Instructions</h3>
                <p>Click the "Wrap" button to toggle word wrap functionality. When enabled, long file names should wrap to multiple lines instead of being truncated with ellipsis. The preference should persist across page refreshes.</p>
            </div>
        </div>
    </div>
    
    <script>
        // Storage key for word wrap preference
        const WORD_WRAP_STORAGE_KEY = 'fileManagerWordWrap';
        
        // Initialize word wrap toggle functionality
        function initWordWrapToggle() {
            const toggleButton = document.getElementById('wordWrapToggle');
            const appContainer = document.getElementById('app');
            
            if (!toggleButton || !appContainer) {
                console.warn('[WordWrap] Toggle button or app container not found');
                return;
            }
            
            // Load saved preference
            const savedPreference = localStorage.getItem(WORD_WRAP_STORAGE_KEY);
            const isWordWrapEnabled = savedPreference === 'true';
            
            // Apply initial state
            updateWordWrapState(isWordWrapEnabled);
            
            // Add click event listener
            toggleButton.addEventListener('click', handleWordWrapToggle);
            
            console.log('[WordWrap] Initialized with state:', isWordWrapEnabled);
        }
        
        // Handle word wrap toggle button click
        function handleWordWrapToggle() {
            const appContainer = document.getElementById('app');
            const toggleButton = document.getElementById('wordWrapToggle');
            
            if (!appContainer || !toggleButton) return;
            
            // Toggle the word wrap state
            const isCurrentlyEnabled = appContainer.classList.contains('word-wrap-enabled');
            const newState = !isCurrentlyEnabled;
            
            // Update UI state
            updateWordWrapState(newState);
            
            // Save preference
            localStorage.setItem(WORD_WRAP_STORAGE_KEY, newState.toString());
            
            // Show feedback
            showWordWrapFeedback(newState);
            
            console.log('[WordWrap] Toggled to:', newState);
        }
        
        // Update word wrap state in UI
        function updateWordWrapState(isEnabled) {
            const appContainer = document.getElementById('app');
            const toggleButton = document.getElementById('wordWrapToggle');
            
            if (!appContainer || !toggleButton) return;
            
            if (isEnabled) {
                appContainer.classList.add('word-wrap-enabled');
                toggleButton.classList.add('active');
                toggleButton.innerHTML = '<span>üìÑ</span><span>No Wrap</span>';
                toggleButton.title = 'Disable Word Wrap';
            } else {
                appContainer.classList.remove('word-wrap-enabled');
                toggleButton.classList.remove('active');
                toggleButton.innerHTML = '<span>üî§</span><span>Wrap</span>';
                toggleButton.title = 'Enable Word Wrap';
            }
        }
        
        // Show visual feedback when word wrap state changes
        function showWordWrapFeedback(isEnabled) {
            const message = isEnabled ? 'Word wrap enabled' : 'Word wrap disabled';
            
            // Create a temporary notification
            const notification = document.createElement('div');
            notification.className = `word-wrap-notification ${isEnabled ? 'enabled' : 'disabled'}`;
            notification.textContent = message;
            notification.style.cssText = `
                position: fixed;
                bottom: 20px;
                left: 50%;
                transform: translateX(-50%);
                background: ${isEnabled ? '#3b82f6' : '#64748b'};
                color: white;
                padding: 8px 16px;
                border-radius: 20px;
                font-size: 12px;
                z-index: 1000;
                opacity: 0;
                transition: opacity 0.3s ease;
            `;
            
            document.body.appendChild(notification);
            
            // Fade in
            setTimeout(() => {
                notification.style.opacity = '1';
            }, 10);
            
            // Remove after 2 seconds
            setTimeout(() => {
                notification.style.opacity = '0';
                setTimeout(() => {
                    if (notification.parentNode) {
                        notification.parentNode.removeChild(notification);
                    }
                }, 300);
            }, 2000);
        }
        
        // Auto-initialize when DOM is ready
        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', initWordWrapToggle);
        } else {
            initWordWrapToggle();
        }
    </script>
</body>
</html>