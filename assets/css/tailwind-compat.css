/* Tailwind compatibility layer — minimal bootstrap-like helpers
   Added for migration (branch: tw-mig).
   Purpose: Provide small set of Bootstrap-like utilities (.btn, .container, .row, .col, simple display/text helpers)
   Keep this file minimal — refine or move to a separate compat file later if desired.
*/

.btn {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  padding: 0.375rem 0.75rem; /* ~btn padding */
  border-radius: 0.375rem;    /* ~rounded */
  font-size: 0.875rem;
  line-height: 1.25;
  font-weight: 600;
  cursor: pointer;
  border: 1px solid transparent;
  background-color: #e5e7eb; /* gray-200 */
  color: #111827;            /* gray-900 */
  text-decoration: none;
}

.btn-primary {
  background-color: #2563eb; /* blue-600 */
  color: #ffffff;
  border-color: #2563eb;
}

.btn-outline {
  background-color: transparent;
  border-color: #d1d5db; /* gray-300 */
  color: #111827;
}

.btn:disabled,
.btn[disabled] {
  opacity: 0.6;
  cursor: not-allowed;
}

/* Basic container breakpoints approximating Tailwind container widths */
.container {
  width: 100%;
  padding-left: 1rem;
  padding-right: 1rem;
  margin-left: auto;
  margin-right: auto;
  box-sizing: border-box;
}

@media (min-width: 640px) {
  .container { max-width: 640px; }
}
@media (min-width: 768px) {
  .container { max-width: 768px; }
}
@media (min-width: 1024px) {
  .container { max-width: 1024px; }
}
@media (min-width: 1280px) {
  .container { max-width: 1280px; }
}

/* Row & column basics (flex-based) */
.row {
  display: flex;
  flex-wrap: wrap;
  margin-left: -0.5rem;
  margin-right: -0.5rem;
  box-sizing: border-box;
}
.col {
  padding-left: 0.5rem;
  padding-right: 0.5rem;
  box-sizing: border-box;
  flex: 1 0 0%;
  min-width: 0;
}

/* Simple helpers */
.text-center { text-align: center; }
.d-none { display: none !important; }
.d-block { display: block !important; }

/* Form/control fallbacks (minimal) */
.form-control {
  display: block;
  width: 100%;
  padding: 0.5rem 0.75rem;
  font-size: 0.875rem;
  line-height: 1.25;
  color: #111827;
  background-color: #ffffff;
  border: 1px solid #d1d5db;
  border-radius: 0.375rem;
  box-sizing: border-box;
}

/* Pagination / badge minimal styles */
.badge {
  display: inline-block;
  padding: 0.25rem 0.5rem;
  font-size: 0.75rem;
  border-radius: 9999px;
  background-color: #e5e7eb;
  color: #111827;
}

/* Accessibility & overlay helpers (compat fallbacks) */

/* Ensure overlays accept focus when necessary and provide visible focus indication.
   When Tailwind is present the utility focus-visible classes will take precedence.
*/
.tw-overlay:focus {
  outline: none;
}

/* Dialog elements: responsive sizing, scroll within dialog if content is tall */
.modal,
.dialog,
.overlay-dialog,
.confirm-dialog,
.create-dialog,
.rename-dialog,
.log-dialog {
  max-height: 90vh;
  overflow: auto;
  /* responsive width cap and a fluid width to avoid overflow on small screens */
  max-width: 48rem; /* reduce default cap to avoid mobile overflow */
  width: min(48rem, calc(100% - 2rem));
  margin: 1rem;
  box-sizing: border-box;
  word-wrap: break-word;
}

/* Backdrop/backdrop transition smoothing for a nicer reveal */
.tw-overlay {
  transition: background-color .15s ease-in-out, opacity .12s ease, visibility 0s linear .12s;
  pointer-events: none; /* default: do not allow pointer events until explicitly visible */
  touch-action: none; /* prevent touch gesture propagation when hidden */
  will-change: opacity, visibility;
}
/* Visible overlays should accept interactions */
.tw-overlay.visible,
.tw-overlay[aria-hidden="false"] {
  pointer-events: auto;
  touch-action: auto;
}

/* Guard dialog pointer-events & provide a subtle entrance transform while overlay is hidden */
.tw-overlay .modal,
.tw-overlay .dialog,
.tw-overlay .overlay-dialog,
.tw-overlay .confirm-dialog,
.tw-overlay .create-dialog,
.tw-overlay .rename-dialog,
.tw-overlay .log-dialog {
  pointer-events: none;
  transition: transform .12s ease, opacity .12s ease;
  transform: translateY(6px);
  opacity: 0;
}
.tw-overlay.visible .modal,
.tw-overlay.visible .dialog,
.tw-overlay.visible .overlay-dialog,
.tw-overlay.visible .confirm-dialog,
.tw-overlay.visible .create-dialog,
.tw-overlay.visible .rename-dialog,
.tw-overlay.visible .log-dialog {
  pointer-events: auto;
  transform: translateY(0);
  opacity: 1;
}

/* Basic focus-visible fallback for interactive controls (buttons/links).
   Tailwind's focus-visible utilities will override these when CDN is loaded.
*/
.btn:focus,
.btn:focus-visible,
button:focus,
button:focus-visible,
a:focus,
a:focus-visible {
  outline: 3px solid rgba(59,130,246,0.85); /* stronger blue ring */
  outline-offset: 2px;
  box-shadow: 0 0 0 4px rgba(59,130,246,0.12);
}

/* Screen-reader only helper (sr-only) */
.sr-only {
  position: absolute !important;
  width: 1px !important;
  height: 1px !important;
  padding: 0 !important;
  margin: -1px !important;
  overflow: hidden !important;
  clip: rect(0, 0, 0, 0) !important;
  white-space: nowrap !important;
  border: 0 !important;
}

/* Backwards-compatible aria-hidden mapping (kept for robustness) */
.tw-overlay[aria-hidden="true"] { pointer-events: none; }
.tw-overlay[aria-hidden="false"] { pointer-events: auto; }

/* Keep this section small — expand only when specific Bootstrap classes are encountered.
   Note: These are plain CSS fallbacks (not using @apply) so they will work with Tailwind CDN.
*/
/* ===== Additional compat tweaks (post-screenshots) =====
   1) Prevent brief pointer/keyboard leaks by hiding non-visible overlays
   2) Stronger focus-visible for form controls inside dialogs
   3) Allow larger preview/log dialogs on wide screens while keeping them fluid
*/
.tw-overlay:not(.visible),
.tw-overlay[aria-hidden="true"] {
  visibility: hidden;
  opacity: 0;
  pointer-events: none;
  transition: opacity .12s ease, visibility 0s linear .12s;
}
.tw-overlay.visible,
.tw-overlay[aria-hidden="false"] {
  visibility: visible;
  opacity: 1;
  pointer-events: auto;
  transition-delay: 0s;
}

/* Strengthen focus-visible for inputs and controls inside dialogs (accessibility fallback) */
.modal input:focus,
.modal textarea:focus,
.modal select:focus,
.dialog input:focus,
.dialog textarea:focus,
.dialog select:focus,
.create-dialog input:focus,
.rename-dialog input:focus,
.preview-dialog input:focus,
.preview-dialog textarea:focus,
.preview-dialog select:focus,
.log-dialog input:focus,
.log-dialog textarea:focus,
.log-dialog select:focus,
button:focus,
button:focus-visible,
a:focus,
a:focus-visible {
  outline: 4px solid rgba(30,64,175,0.95); /* stronger, more saturated blue */
  outline-offset: 2px;
  box-shadow: 0 0 0 6px rgba(30,64,175,0.12);
  /* Ensure visible under high-contrast modes */
  -ms-high-contrast-adjust: none;
  transition: box-shadow .12s ease;
}

/* Make preview/log dialogs slightly wider on very large screens while remaining fluid */
.tw-overlay .preview-dialog,
.preview-dialog,
.tw-overlay .log-dialog,
.log-dialog {
  max-width: 72rem; /* ~1152px */
  width: min(72rem, calc(100% - 2rem));
  box-sizing: border-box;
}

/* Ensure dialog internal scrolling remains bounded and usable */
.tw-overlay .preview-dialog .preview-editor,
.tw-overlay .log-dialog .log-table-wrapper,
.preview-dialog .preview-editor,
.log-dialog .log-table-wrapper {
  max-height: calc(100vh - 220px);
  overflow: auto;
}

/* Keep this small and specific — expand only when a concrete regression is observed */